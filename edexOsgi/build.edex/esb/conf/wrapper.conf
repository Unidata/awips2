#********************************************************************
##
# This software was developed and / or modified by Raytheon Company,
# pursuant to Contract DG133W-05-CQ-1067 with the US Government.
# 
# U.S. EXPORT CONTROLLED TECHNICAL DATA
# This software product contains export-restricted data whose
# export/transfer/disclosure is restricted by U.S. law. Dissemination
# to non-U.S. persons whether in the United States or abroad requires
# an export license or other authorization.
# 
# Contractor Name:        Raytheon Company
# Contractor Address:     6825 Pine Street, Suite 340
#                         Mail Stop B8
#                         Omaha, NE 68106
#                         402.291.0100
# 
# See the AWIPS II Master Rights File ("Master Rights File.pdf") for
# further licensing information.
##
# Wrapper Properties
#********************************************************************

wrapper.debug=false
set.default.EDEX_HOME=../..
wrapper.working.dir=/awips2/edex/bin
# required due to java bug: 
# http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4388188
# not sure if the yajsw developers have any intention of
# implementing the work-around (solution?) stated in the
# ticket.
wrapper.fork_hack=true
# at a minimum: prevents the printing of the "Invalid parameter" messages
wrapper.console.pipestreams=true

# Java Application
wrapper.java.command=/awips2/java/bin/java

# necessary for etc/init.d/edex_camel
wrapper.pidfile=${EDEX_HOME}/bin/${EDEX_RUN_MODE}.pid

# Java Classpath (include wrapper.jar)  Add class path elements as
#  needed starting from 1
wrapper.java.classpath.1=${EDEX_HOME}/bin/yajsw/wrapper.jar
wrapper.java.classpath.2=${EDEX_HOME}/conf/
wrapper.java.classpath.3=${EDEX_HOME}/conf/cache/
wrapper.java.classpath.4=${EDEX_HOME}/conf/spring/
wrapper.java.classpath.5=${EDEX_HOME}/conf/resources/

# include ANY jar files that are found in the locations denoted by
# wrapper.search.java.classpath.#
wrapper.search.java.classpath.1=${EDEX_HOME}/lib/dependencies
wrapper.search.java.classpath.2=${EDEX_HOME}/lib/plugins

# set the umask for file/directory creation by the Java process
wrapper.java.umask=0002

# Java Library Path
wrapper.java.library.path.1=${EDEX_HOME}/lib/dependencies/org.jep.linux${EDEX_BITS}/
wrapper.java.library.path.2=${LD_LIBRARY_PATH}
wrapper.java.library.path.3=${EDEX_HOME}/lib/native/linux32/
# this path will not exist for 32-bit EDEX; however, both the 32-bit and 64-bit
# paths are needed for 64-bit EDEX
wrapper.java.library.path.4=${EDEX_HOME}/lib/native/linux64/

# Java Additional Parameters
# note that n is the parameter number starting from 1.
wrapper.java.additional.1=-Dedex.run.mode=${EDEX_RUN_MODE}
wrapper.java.additional.2=-Dedex.home=${EDEX_HOME}

# Use wrapper.jvm.parameter.order.# to specify the order
# that the jvm parameters should be included in the command.
# There cannot be duplicate numbered parameters otherwise
# one will always take precedence over the other. Use
# wrapper.jvm.parameter.order.LAST to specify a parameter
# that should always be the last jvm parameter without
# needing to specify the order of every individual jvm parameter.
wrapper.jvm.parameter.order.1=-Dedex.run.mode
# since it is used to determine whether a particular
# instance of EDEX is running or not.
wrapper.jvm.parameter.order.2=-Daw.site.identifier
wrapper.jvm.parameter.order.LAST=-classpath

# sets the Maximum Permanent Generation memory size
wrapper.java.additional.3=-XX:MaxPermSize=${MAX_PERM_SIZE}

# turn on JMX access to basic JVM instrumentation
wrapper.java.additional.4=-Dcom.sun.management.jmxremote

# Enforces GMT to be used as the timezone
wrapper.java.additional.5=-Duser.timezone=GMT

wrapper.java.additional.6=-XX:+UseConcMarkSweepGC

wrapper.java.additional.7=-XX:+CMSIncrementalMode

wrapper.java.additional.8=-Djava.net.preferIPv4Stack=true
wrapper.java.additional.9=-Ddb.addr=${DB_ADDR}
wrapper.java.additional.10=-Ddb.port=${DB_PORT}

wrapper.java.additional.12=-Ddc.db.name=${DC_DB_NAME}
wrapper.java.additional.13=-Dfxa.db.name=${FXA_DB_NAME}
wrapper.java.additional.14=-Dhm.db.name=${HM_DB_NAME}
wrapper.java.additional.15=-Dih.db.name=${IH_DB_NAME}
wrapper.java.additional.16=-Daw.site.identifier=${AW_SITE_IDENTIFIER}

wrapper.java.additional.20=-Ddb.metadata.pool.min=${METADATA_POOL_MIN}
wrapper.java.additional.21=-Ddb.metadata.pool.max=${METADATA_POOL_MAX}

wrapper.java.additional.30=${PROFILER_PARAM_1}

wrapper.java.additional.31=-Dlog4j.configuration=${LOG4J_CONF}

wrapper.java.additional.38=-DHighMem=${HIGH_MEM_FLAG}

wrapper.java.additional.40=-Dqpid.dest_syntax=BURL
wrapper.java.additional.41=-Dweb.port=8080
wrapper.java.additional.42=-Dconfidential.port=8443
wrapper.java.additional.44=-Dedex.arch=${EDEX_BITS}-bit
wrapper.java.additional.52=-DinitializeHibernatables=true
wrapper.java.additional.53=-Dorg.apache.camel.jmx.disabled=true

# Initial Java Heap Size (in MB)
wrapper.java.initmemory=${INIT_MEM}

# Maximum Java Heap Size (in MB)
wrapper.java.maxmemory=${MAX_MEM}

wrapper.java.app.mainclass=com.raytheon.uf.edex.esb.Main
# Application parameters. Add parameters as needed starting from 2
wrapper.app.parameter.2=start

wrapper.ping.timeout=300

#********************************************************************
# Monitor the Application
#********************************************************************
wrapper.java.monitor.heap = true
# warning messages will be logged; it is also possible to send an e-mail
wrapper.java.monitor.heap.threshold.percent = 90

wrapper.java.monitor.deadlock = true
# application will be restarted and a warning message will be logged
wrapper.filter.action.deadlock.restart=RESTART

# restart the application if it crashes
wrapper.on_exit.default=RESTART
# restart the application if it runs out of memory
wrapper.trigger.1=java.lang.OutOfMemoryError
wrapper.trigger.action=RESTART

#********************************************************************
# Wrapper Logging Properties
#********************************************************************
# Format of output for the console.  (See docs for formats)
wrapper.console.format=M

# Log Level for console output.  (See docs for log levels)
wrapper.console.loglevel=${CONSOLE_LOGLEVEL}

# Log file to use for wrapper output logging.
wrapper.logfile=${EDEX_HOME}/logs/edex-${EDEX_RUN_MODE}-YYYYMMDD.log

# Format of output for the log file.  (See docs for formats)
wrapper.logfile.format=M

# Log Level for log file output.  (See docs for log levels)
wrapper.logfile.loglevel=INFO

# Set the log rollover mode for the log.
#   DATE - creates a new file each day - file name must include YYYYMMDD.
#   SIZE - uses log size for log roll-over.
wrapper.logfile.rollmode=DATE

# Maximum size that the log file will be allowed to grow to before
#  the log is rolled. Size is specified in bytes.  The default value
#  of 0, disables log rolling.  May abbreviate with the 'k' (kb) or
#  'm' (mb) suffix.  For example: 10m = 10 megabytes.
# Note: ignored for wrapper.logfile.rollmode=DATE
wrapper.logfile.maxsize=1000m

# Maximum number of rolled log files which will be allowed before old
#  files are deleted.  The default value of 0 implies no limit.
wrapper.logfile.maxfiles=30

# Log Level for sys/event log output.  (See docs for log levels)
wrapper.syslog.loglevel=INFO

#********************************************************************
# Wrapper Windows Properties
#********************************************************************
# Title to use when running as a console
wrapper.console.title=EDEX ${EDEX_RUN_MODE}

#********************************************************************
# Wrapper Windows NT/2000/XP Service Properties
#********************************************************************
# WARNING - Do not modify any of these properties when an application
#  using this configuration file has been installed as a service.
#  Please uninstall the service before modifying this section.  The
#  service can then be reinstalled.

# Name of the service
wrapper.ntservice.name=EDEX

# Display name of the service
wrapper.ntservice.displayname=EDEX

# Description of the service
wrapper.ntservice.description=EDEX ESB

# Service dependencies.  Add dependencies as needed starting from 1
wrapper.ntservice.dependency.1=

# Mode in which the service is installed.  AUTO_START or DEMAND_START
wrapper.ntservice.starttype=AUTO_START

# Allow the service to interact with the desktop.
wrapper.ntservice.interactive=false
